---
layout: default
---
<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ page.title | escape }}</h1>
  </header>

  <div class="post-content">
    {{ content }}
  </div>

<div id="map" class="map"></div>
<div id="seleccion" style="margin-top:10px"></div>  
  
<script>
      var styles = {
      };
      var styleFunction = function(feature) {
        return styles[feature.getGeometry().getType()];
      };
      var vectorSource = new ol.source.Vector({
      format: new ol.format.GeoJSON(),
      url: '{{ page.mapurl }}'
      });
      var vectorLayer = new ol.layer.Vector({
        source: vectorSource,
        style: styleFunction
      });
      //CARGA DE OSM
      var map = new ol.Map({
        target: 'map',
        layers: [new ol.layer.Tile({source: new ol.source.OSM()})],
        view: new ol.View({center: ol.proj.fromLonLat([{{ page.lon }}, {{ page.lat }}]), zoom: {{ page.zoom }}})
      });
  
      //Declaracion de dirección de url
      var mapurl= '{{ page.mapurl }}';
      //Declaracion de Capa GeoJson dentro de interfaz
      var capa= new ol.layer.Vector({source: new ol.source.Vector({url: mapurl, style: styleFunction, format: new ol.format.GeoJSON()} )}); //style:styleFunction
  
  //Agrega GeoJSON a OSM
      map.addLayer(capa);
  
//~~~~~~~~~~~~~~CONTROLES~~~~~~~~~~~~~~~ 

map.addControl(new ol.control.FullScreen());
map.addControl(new ol.control.OverviewMap());


//~~~~~~~~~~~~~~Interaccion capa vectorial~~~~~~~~~~~~~~~

var seleccion= new ol.interaction.Select();
map.addInteraction(seleccion);
seleccion.on('select', function(e) {
  //ol.interaction.SelectEvent
  var div=document.getElementById(
    'seleccion');
  var seleccionados = e.target.getFeatures();
  var html = '';
  seleccionados.forEach(function(t){
     html +='<strong> AÑO DE LEVANTAMIENTO: </strong> ' + t.get('Year') + 
            '<strong> LUGAR: </strong> ' + t.get('Ubicacion') +
            '<strong> TIPO:  </strong>' + t.get ('Tipopunto') + 
            '<strong> COLONIA: </strong> ' + t.get ('Colonia') +
            '<strong> ESTATUS: </strong> ' + t.get ('Estatus') ;
    html += '<hr/>';
  });
  div.innerHTML=html;

});
  
</script>
  
</article>
